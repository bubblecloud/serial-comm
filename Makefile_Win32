all : libSerialComm.dll
	del j_extensions_comm_SerialComm_SerialCommInputStream.h
	del j_extensions_comm_SerialComm_SerialCommOutputStream.h
	del Windows\SerialComm_Windows.o
	jar cmf MANIFEST.MF SerialComm.jar j/extensions/comm/*.class Linux/x86/* Linux/x86_64/* OSX/x86/* OSX/x86_64/* Windows/x86/* Windows/x86_64/*
libSerialComm.dll : SerialComm_Windows.o
	gcc -Wl,--add-stdcall-alias -mno-cygwin -shared -o Windows\x86\SerialComm.dll Windows\SerialComm_Windows.o
SerialComm_Windows.o : Windows\SerialComm_Windows.cpp j_extensions_comm_SerialComm.h
	gcc -I"C:\Program Files\Java\jdk1.7.0_03\include" -I"C:\Program Files\Java\jdk1.7.0_03\include\win32" -c Windows\SerialComm_Windows.cpp -o Windows\SerialComm_Windows.o
j_extensions_comm_SerialComm.h : j/extensions/comm/SerialComm.class
	javah -jni j.extensions.comm.SerialComm
clean :
	del j_extensions_comm_SerialComm.h
	del j_extensions_comm_SerialComm_SerialCommInputStream.h
	del j_extensions_comm_SerialComm_SerialCommOutputStream.h
	del Windows\SerialComm_Windows.o