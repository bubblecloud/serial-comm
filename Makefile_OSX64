all : libSerialComm.jnilib
	rm OSX64/SerialComm_OSX.o
	rm j_extensions_comm_SerialComm_SerialCommInputStream.h
	rm j_extensions_comm_SerialComm_SerialCommOutputStream.h
	jar cmf MANIFEST.MF SerialComm.jar j/extensions/comm/*.class Linux32 Linux64 OSX32/libSerialComm.jnilib OSX64/libSerialComm.jnilib Win32/SerialComm.dll Win64/SerialComm.dll
libSerialComm.jnilib : SerialComm_OSX.o
	cc -m64 -dynamiclib -o OSX64/libSerialComm.jnilib OSX64/SerialComm_OSX.o -framework Cocoa -framework IOKit -framework JavaVM
SerialComm_OSX.o : OSX64/SerialComm_OSX.cpp j_extensions_comm_SerialComm.h
	cc -m64 -I"/System/Library/Frameworks/JavaVM.framework/Versions/Current/Headers" -c OSX64/SerialComm_OSX.cpp -o OSX64/SerialComm_OSX.o
j_extensions_comm_SerialComm.h : j/extensions/comm/SerialComm.class
	javah -jni j.extensions.comm.SerialComm
clean :
	rm j_extensions_comm_SerialComm_SerialCommInputStream.h
	rm j_extensions_comm_SerialComm_SerialCommOutputStream.h
	rm j_extensions_comm_SerialComm.h
	rm OSX64/SerialComm_OSX.o